---
import { Text } from "astro:db";
import { db } from "astro:db";
import TextListItem from "./TextListItem.astro";

let texts = [] as {
  name: string;
  content: string;
  contentEs?: string | null;
  contentRu?: string | null;
  authorId: number;
}[];

try {
  texts = await db.select().from(Text);
} catch (error) {
  console.error(error);
}
---

<div class="container">
  {
    texts.map(({ content, name, contentEs, contentRu }) => (
      <TextListItem
        content={content}
        name={name}
        contentEs={contentEs}
        contentRu={contentRu}
      />
    ))
  }
</div>

<style lang="scss">
  .container {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    justify-content: center;
    gap: 0.5rem;
  }
</style>
